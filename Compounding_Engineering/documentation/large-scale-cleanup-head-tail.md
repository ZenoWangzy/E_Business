# 大规模文档清理技巧

## ✅ 推荐模式

**使用head/tail命令精确控制行范围**

```bash
# ✅ Step 1: 查看总行数
wc -l plan.md  # 输出: 466 plan.md

# ✅ Step 2: 确定保留行数（执行日志结束于358行）
head -n 358 plan.md > /tmp/plan_cleaned.md && mv /tmp/plan_cleaned.md plan.md

# ✅ Step 3: 验证结果
wc -l plan.md  # 输出: 358 plan.md ✅
```

## ❌ 反模式

```bash
# ❌ 手动Edit删除大段内容（容易出错）
# ❌ 使用sed删除行范围（需要精确行号）
# ❌ 重复Edit小段删除（耗时长，易遗漏）
```

## 💡 核心原则

- **先用wc -l**: 了解文件总行数
- **精确计算**: 确定保留行数（而非删除行数）
- **临时文件**: 先写到/tmp，确认后再覆盖
- **立即验证**: 操作后用wc -l验证

## 📊 对比

| 方法 | 准确性 | 速度 | 可回滚 |
|------|--------|------|--------|
| head -n + mv | ✅ 高 | ⚡ 快 | ✅ 是 |
| Edit工具 | ⚠️ 中 | 🐌 慢 | ✅ 是 |
| sed删除 | ⚠️ 中 | ⚡ 快 | ❌ 否 |

